<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contacts search</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>

  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div id='content'></div>
  <script type="text/babel">
    var CONTACTS = [{
        name: 'Darth Vader',
        phoneNumber: '+250966666666',
        image: 'http://cs7.pikabu.ru/images/big_size_comm_an/2014-03_7/13962622876915.gif'
      }, {
        name: 'Princess Leia',
        phoneNumber: '+250966344466',
        image: 'http://images6.fanpop.com/image/photos/33100000/CARRIE-FISHER-anakin-vader-and-princess-leia-33186069-190-149.gif'
      }, {
        name: 'Luke Skywalker',
        phoneNumber: '+250976654433',
        image: 'http://www.youshouldshare.me/wp-content/uploads/2015/03/14264215682890-anigif_enhanced-buzz-13518-1367608452-4.gif'
      }, {
        name: 'Chewbacca',
        phoneNumber: '+250456784935',
        image: 'https://media.giphy.com/media/RUUdVZqwpfTRS/giphy.gif'
      }
    ];

    var Contact = React.createClass({
      render: function() {
        return (
          <li className='contact'>
            <img className='contact-image' src={this.props.image} width='80px' height='80px' />
            <div>
                <div className='contact-name'> {this.props.name} </div>
                <div className='contact-number'> {this.props.phoneNumber} </div>
            </div>
          </li>
        );
      }
    });

    var ContactsList = React.createClass({
      getInitialState: function() {
        return {
          filteredContacts: CONTACTS
        };
      },

      handleFilterChange: function(e) {
        var search = e.target.value.toLowerCase();
        var filteredContacts = CONTACTS.filter(function(contact) {
          var contactName = contact.name.toLowerCase();
          return contactName.indexOf(search) !== -1;
        });

        this.setState({
          filteredContacts: filteredContacts
        });
      },

      render: function() {
        return (
          <div className='contacts'>
            <input className='search-field' type='text' placeholder='Search contacts' onChange={this.handleFilterChange}/>
            <ul className='contacts-list'>
            {
              this.state.filteredContacts.map(function(contact) {
                return <Contact name={contact.name} phoneNumber={contact.phoneNumber} image={contact.image} />;
              })
            }
            </ul>
          </div>
        );
      }
    });

    ReactDOM.render(
      <ContactsList />,
      document.getElementById('content')
    );
  </script>
</body>
</html>